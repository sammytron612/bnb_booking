(function(){function c(){console.log("[Gallery] initGalleryModals called"),document.querySelectorAll("[data-modal-trigger]:not([data-gallery-ready])").forEach(l=>{l.setAttribute("data-gallery-ready","1");const n=l.dataset.modalTrigger,t=document.querySelector(`[data-modal="${n}"]`);if(!t){console.warn("[Gallery] Modal not found for gallery:",n);return}const h=t.querySelector(`[data-gallery-images="${n}"]`);let i=[];if(h)try{i=JSON.parse(h.textContent)}catch(e){console.error("[Gallery] Failed to parse images data:",e);return}let a=0;const s=t.querySelector(`#modal-image-${n}`),v=t.querySelector(`#modal-counter-${n}`),w=t.querySelectorAll(`[data-modal-thumb="${n}"]`);function o(){i[a]&&s&&(s.src=i[a].src,s.alt=i[a].alt),v&&(v.textContent=`${a+1} / ${i.length}`),w.forEach((e,r)=>{e.classList.toggle("ring-2",r===a),e.classList.toggle("ring-white",r===a),e.classList.toggle("opacity-100",r===a),e.classList.toggle("opacity-60",r!==a)})}function y(e=0){a=e,t.classList.remove("hidden"),t.classList.add("flex"),document.body.style.overflow="hidden",o()}function d(){t.classList.add("hidden"),t.classList.remove("flex"),document.body.style.overflow=""}function S(){a=(a+1)%i.length,o()}function E(){a=(a-1+i.length)%i.length,o()}l.addEventListener("click",e=>{e.preventDefault();const r=parseInt(l.dataset.imageIndex)||0;y(r)});const p=t.querySelector(`[data-modal-close="${n}"]`),g=t.querySelector(`[data-modal-next="${n}"]`),f=t.querySelector(`[data-modal-prev="${n}"]`);p&&p.addEventListener("click",d),g&&g.addEventListener("click",S),f&&f.addEventListener("click",E),w.forEach((e,r)=>{e.addEventListener("click",()=>{a=r,o()})}),document.addEventListener("keydown",e=>{t.classList.contains("hidden")||(e.key==="Escape"&&d(),e.key==="ArrowLeft"&&E(),e.key==="ArrowRight"&&S())}),t.addEventListener("click",e=>{e.target===t&&d()}),console.log("[Gallery] Modal initialized for:",n,"with",i.length,"images")})}function u(){console.log("[Slider] initSliders called");const m=document.querySelectorAll("[data-slider]:not([data-ready])");m.length||console.log("[Slider] no new slider roots found"),m.forEach(l=>{l.setAttribute("data-ready","1");const n=l.querySelector("[data-slider-track]");if(!n){console.warn("[Slider] missing track");return}const t=Array.from(n.querySelectorAll("[data-slide]"));if(!t.length){console.warn("[Slider] no slides");return}const h=l.querySelector("[data-prev]"),i=l.querySelector("[data-next]"),a=l.querySelector("[data-indicators]");a||console.warn("[Slider] missing indicators container");const s=l.querySelector("[data-debug]"),v=l.querySelector("[data-fallback]"),w=parseInt(l.dataset.interval||"3000",10);let o=0,y=null;t.forEach((e,r)=>{const L=document.createElement("button");L.type="button",L.className="h-3 rounded-full transition-all duration-300 focus:outline-none bg-white/50 w-3",L.setAttribute("aria-label","Go to slide "+(r+1)),L.addEventListener("click",()=>p(r)),a&&a.appendChild(L)});function d(){t.forEach((e,r)=>{r===o?(e.style.opacity="1",e.style.zIndex="2"):(e.style.opacity="0",e.style.zIndex="1")}),a&&a.querySelectorAll("button").forEach((e,r)=>{r===o?(e.classList.remove("bg-white/50","w-3"),e.classList.add("bg-white","w-6")):(e.classList.add("bg-white/50","w-3"),e.classList.remove("bg-white","w-6"))}),s&&(s.textContent=`slide ${o+1}/${t.length}`),v&&(v.style.display="none")}function S(){o=(o+1)%t.length,d()}function E(){o=(o-1+t.length)%t.length,d()}function p(e){o=e,d()}function g(){f(),y=setInterval(S,w)}function f(){y&&(clearInterval(y),y=null)}h&&h.addEventListener("click",E),i&&i.addEventListener("click",S),l.addEventListener("mouseenter",f),l.addEventListener("mouseleave",g),document.addEventListener("visibilitychange",()=>document.hidden?f():g()),window.addEventListener("resize",d);try{d(),g(),console.log("[Slider] Initialized",t.length)}catch(e){console.error("[Slider] init error",e),s&&(s.textContent="error")}})}window._sliderInit=u,window._galleryInit=c,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{u(),c()}):(u(),c()),document.addEventListener("livewire:navigated",()=>{u(),c()}),new MutationObserver(m=>{m.some(l=>Array.from(l.addedNodes).some(n=>n.nodeType===1&&n.matches&&(n.matches("[data-slider]")||n.matches("[data-modal-trigger]"))))&&(u(),c())}).observe(document.documentElement,{childList:!0,subtree:!0}),setTimeout(()=>{document.querySelector("[data-slider]")&&!document.querySelector("[data-slider][data-ready]")&&(console.log("[Slider] retry init after delay"),u()),document.querySelector("[data-modal-trigger]")&&!document.querySelector("[data-modal-trigger][data-gallery-ready]")&&(console.log("[Gallery] retry init after delay"),c())},1e3)})();
